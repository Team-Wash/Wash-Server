openapi: 3.0.0
info:
  title: WASH API
  version: 1.0.0

paths:
# 사용자 관련 API 
  /user/info:
    get:
      tags:
        - 사용자
      summary: 계정 정보 가져오기
      parameters:
      - name: token
        in: header
        required: true
        schema:
          properties:
            Authorization:
              type: string
              description: 헤더에 토큰을 입력
      responses:
        '200':
          description: 계정 정보 가져오기 성공
          content:
            application/json:
              schema:
                type: object
                properties:
                  issuccess:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "계정 정보 가져오기 성공"
                  result:
                    type: object
                    properties:
                      id:
                        type: integer
                        example: 1
                      nickname:
                        type: string
                        example: "사과 빠진 통나무 0612"
                      name:
                        type: string
                        example: "모오"
                      provider:
                        type: string
                        example: "Google"
                      email:
                        type: string
                        example: "hanggildong@naver.com"
        '400':
          description: 잘못된 요청
          content:
            application/json:
              schema:
                type: object
                properties:
                  errorMessage:
                    type: string
                    example: "Invalid request"

  /user/info/nickname:
    post:
      tags:
        - 사용자
      summary: 닉네임 변경하기
      parameters:
      - name: token
        in: header
        required: true
        schema:
          properties:
            Authorization:
              type: string
              description: 헤더에 토큰을 입력
      - name: newNickname
        in: body
        description: 변경할 닉네임을 입력합니다.
        required: true
        schema:
          properties:
            newNickname:
              type: string
              description: 변경할 닉네임
              example: 모오
      responses:
        '200':
          description: 닉네임 변경 성공
          content:
            application/json:
              schema:
                type: object
                properties:
                  issuccess:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "닉네임 변경 성공"
                  result:
                    type: object
                    properties:
                      id:
                        type: integer
                        example: 1
                      nickname:
                        type: string
                        example: "Halyn"
        '400':
          description: 닉네임 변경 실패
          content:
            application/json:
              schema:
                type: object
                properties:
                  errorMessage:
                    type: string
                    example: "Invalid request"                         

  /user/subscribe:
    post:
      tags:
        - 사용자
      summary: 구독하기
      parameters:
      - name: token
        in: header
        required: true
        schema:
          properties:
            Authorization:
              type: string
              description: 헤더에 토큰을 입력
      responses:
        '200':
          description: 구독이 성공적으로 시작
          content:
            application/json:
              schema:
                type: object
                properties:
                  issuccess:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: 구독이 성공적으로 시작되었습니다.
                  result:
                    type: object
                    properties:
                      id:
                        type: integer
                        example: 1
                      name:
                        type: string
                        example: "모오"
                      email:
                        type: string
                        example: "haggildong@gmail.com"
                      subscriptionPlan:
                        type: string
                        example: "pro"
                      status:
                        type: string
                        example: "active"
                      period:
                        type: string
                        example: "1개월"
        '400':
          description: 구독 실패
          content:
            application/json:
              schema:
                type: object
                properties:
                  errorMessage:
                    type: string
                    example: "Invalid request"

    patch:
      tags:
        - 사용자
      summary: 구독 취소
      parameters:
      - name: token
        in: header
        required: true
        schema:
          properties:
            Authorization:
              type: string
              description: 헤더에 토큰을 입력
      responses:
        '200':
          description: 구독 취소
          content:
            application/json:
              schema:
                type: object
                properties:
                  issuccess:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: 구독이 성공적으로 취소되었습니다.
                  result:
                    type: object
                    properties:
                      id:
                        type: integer
                        example: 1
                      name:
                        type: string
                        example: "모오"
                      email:
                        type: string
                        example: "haggildong@gmail.com"
                      subscriptionPlan:
                        type: string
                        example: "basic"
                      status:
                        type: string
                        example: "inactive"
                      endDate:
                        type: string
                        example: "2024-07-28"
        '400':
          description: 구독 취소 실패
          content:
            application/json:
              schema:
                type: object
                properties:
                  errorMessage:
                    type: string
                    example: "Invalid request"
  /user:
    delete:
      tags:
        - 사용자
      summary: 회원 탈퇴
      parameters:
      - name: token
        in: header
        description: redis에 저장된 refresh token과 db에 저장된 유저 관련 데이터들을 삭제
        required: true
      responses:
        '200':
          description: 회원탈퇴 성공
          content:
            application/json:
              schema:
                type: object
                properties:
                  issuccess:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: 회원탈퇴 성공
                  
        '400':
          description: 회원 탈퇴 실패
          content:
            application/json:
              schema:
                type: object
                properties:
                  errorMessage:
                    type: string
                    example: "Invalid request"
  
  /user/logout:
    get:
      tags:
        - 사용자
      summary: 로그아웃
      parameters:
      - name: token
        in: header
        description: redis에 저장된 refreshToken을 삭제
        required: true
      responses:
        '200':
          description: 로그아웃 성공 시 로그인 페이지로 리디렉션
          content:
            application/json:
              schema:
                type: object
                properties:
                  issuccess:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: 로그아웃 성공
        '400':
          description: 로그아웃 실패
          content:
            application/json:
              schema:
                type: object
                properties:
                  errorMessage:
                    type: string
                    example: "Invalid request"

# 로그인 관련 API
  /user/login/signUp:
    post:
      tags:
        - 로그인
      summary: 회원가입
      parameters:
      - name: singUp
        in: body
        required: true
        schema:
          properties:
            email:
              type: string
              description: 가입하려는 이메일
              example: dhrwodms@naver.com
            password:
              type: string
              description: 가입 비밀번호
              example: 1234
            
      responses:
        '200':
          description: 회원가입 성공
          content:
            application/json:
              schema:
                type: object
                properties:
                  issuccess:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: 회원가입 성공      
        '400':
          description: 계정 정보 가져오기 실패
          content:
            application/json:
              schema:
                type: object
                properties:
                  errorMessage:
                    type: string
                    example: "Invalid request"

  /user/login/general:
    post:
      tags:
        - 로그인
      summary: 일반 로그인
      parameters:
      - name: Login
        in: body
        required: true
        schema:
          properties:
            email:
              type: string
              description: 로그인하려는 이메일
              example: dhrwodms@naver.com
            password:
              type: string
              description: 로그인 비밀번호
              example: 1234
      responses:
        '200':
          description: 일반 로그인 성공
          content:
            application/json:
              schema:
                type: object
                properties:
                  issuccess:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: 로그인 성공
                  # result:
                  #   type: string
                  #   example: "${refreshToken}"
        '400':
          description: 일반 로그인 실패
          content:
            application/json:
              schema:
                type: object
                properties:
                  errorMessage:
                    type: string
                    example: "Invalid request"            
  
  /user/login/naver: 
    post:
      tags:
        - 로그인
      summary: 네이버 로그인
      parameters:
      - name: token
        in: body
        description: 로그인 후 받은 id 토큰을 입력합니다.
        required: true
        schema:
          properties:
            idToken:
              type: string
               
      responses:
        '200':
          description: 네이버 로그인 성공
          content:
            application/json:
              schema:
                type: object
                properties:
                  issuccess:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: 네이버 로그인 성공
                  result:
                    type: string
                    example: "${refreshToken}"
        '400':
          description: 네이버 로그인 실패
          content:
            application/json:
              schema:
                type: object
                properties:
                  errorMessage:
                    type: string
                    example: "Invalid request"            

  /user/login/kakao:
    delete:
      tags:
        - 로그인
      summary: 카카오 로그인
      parameters:
      - name: token
        in: body
        description: 로그인 후 받은 id 토큰을 입력합니다.
        required: true
        schema:
          properties:
            idToken:
              type: string

      responses:
        '200':
          description: 카카오 로그인
          content:
            application/json:
              schema:
                type: object
                properties:
                  issuccess:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: 카카오 로그인 성공
                  result:
                    type: string
                    example: "${refreshToken}"
                  
        '400':
          description: 카카오 로그인 실패
          content:
            application/json:
              schema:
                type: object
                properties:
                  errorMessage:
                    type: string
                    example: "Invalid request"

  /user/login/refresh:
    delete:
      tags:
        - 로그인
      summary: 토큰 재발급(임시)
      parameters:
      - name: token
        in: header
        description: accessToken을 입력합니다.
        required: true
      responses:
        '200':
          description: 토큰 재발급
          content:
            application/json:
              schema:
                type: object
                properties:
                  issuccess:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: 토큰 재발급 성공
                  result:
                    type: string
                    example: "${refreshToken}"
                  
        '400':
          description: 토큰 재발급 실패
          content:
            application/json:
              schema:
                type: object
                properties:
                  errorMessage:
                    type: string
                    example: "Invalid request"

# 홈 관련 API 
  /folders:
    get:
      summary: 전체 폴더 조회하기
      description: 사용자가 보유하고 있는 모든 폴더 목록을 조회합니다.
      tags:
        - 홈
      responses:
        '200':
          description: 폴더 목록 조회 성공
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    folderId:
                      type: string
                      description: 폴더 ID
                    folderName:
                      type: string
                      description: 폴더 이름
        '400':
          description: 잘못된 요청
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "잘못된 요청 본문"

  /folders/order:
    patch:
      summary: 전체 폴더 배치 조정하기
      description: 폴더 디스플레이 순서를 조정합니다.
      tags:
        - 홈
      parameters:
        - name: order
          in: query
          required: true
          schema:
            type: array
            items:
              type: string
              description: 폴더 ID
            description: 새 폴더 순서 배열 (배열의 순서가 새로운 폴더 배치를 나타냅니다.)
      responses:
        '200':
          description: 폴더 순서 조정 성공
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "폴더 순서 조정 성공"

  /folders/{folderId}:
    patch:
      summary: 폴더 이름 수정하기
      description: 폴더의 이름을 수정합니다.
      tags:
        - 홈
      parameters:
        - name: folderId
          in: path
          required: true
          schema:
            type: string
            description: 폴더 ID
        - name: folderName
          in: query
          required: true
          schema:
            type: string
            description: 수정할 폴더 이름
      responses:
        '200':
          description: 폴더 이름 수정 성공
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "폴더 이름 수정 성공"
        '400':
          description: 잘못된 요청
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "잘못된 요청 본문"
        '404':
          description: 찾을 수 없음
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "데이터를 찾을 수 없습니다."


    delete:
      summary: 폴더 삭제하기
      description: 폴더를 삭제하면 그 안에 있는 문제들도 모두 삭제됩니다.
      tags:
        - 홈
      parameters:
        - name: folderId
          in: path
          required: true
          schema:
            type: string
            description: 폴더 ID
      responses:
        '204':
          description: 폴더 및 폴더 내 문제 삭제 성공
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "폴더 및 폴더 내 문제 삭제 성공"
        '404':
          description: 찾을 수 없음
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "데이터를 찾을 수 없습니다."

  /folders/{folderId}/problems:
    get:
      summary: 폴더 속 문제 미리보기
      description: 폴더를 선택하면 해당 폴더 안에 있는 문제들을 볼 수 있습니다.
      tags:
        - 홈
      parameters:
        - name: folderId
          in: path
          required: true
          schema:
            type: string
            description: 폴더 ID
      responses:
        '200':
          description: 폴더 속 문제 미리보기 조회 성공
          content:
            application/json:
              schema:
                type: object
                properties:
                  folderName:
                    type: string
                    description: 폴더 이름
                  problems:
                    type: array
                    items:
                      type: object
                      properties:
                        problemId:
                          type: string
                          description: 문제 ID
                        problemText:
                          type: string
                          description: 문제 텍스트
                        problemImage:
                          type: string
                          format: uri
                          description: 문제 이미지 URL
        '404':
          description: 찾을 수 없음
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "데이터를 찾을 수 없습니다."
  /folders/problems:
    post:
      tags:
        - 홈
      summary: 문제 추가하기
      description: 문제 추가하기
      parameters:
      - name: token
        in: header
        required: true
        schema:
          properties:
            Authorization:
              type: string
              description: 헤더에 토큰을 입력

      - name: addProblem
        in: body
        required: true
        schema:
          properties:
            folderId:
              type: integer
              description: 폴더 ID
              example: 1
            folderName:
              type: string
              description: 폴더 이름
              example: 수학
            subscriptionPlan:
              type: string
              example: "basic"
            problemText:
               type: string
               description: subscriptionPlan이 basic일 시 ""
               example: ""
            answer:
              type: string
              description: 문제 정답
              example: 3
            mainCategory:
              type: string
              description: 대분류 유형 선택 하지 않을 시 ""
              example: 수학
            category:
              type: string
              description: 중분류 유형 선택 하지 않을 시 ""
              example: 미적분
            subCategory:
              type: string
              description: 소분류 유형 선택 하지 않을 시 ""
              example: 함수의 극한
            problemImage:
              type: string
              format: uri
              description: mulitpart/form 포맷
              example: 문제 이미지 URL
            solutionImage:
              type: string
              format: uri
              description: mulitpart/form 포맷, 선택하지 않을 시 ""
              example: 풀이 파일명
            passageImage:
              type: string
              format: uri
              description: mulitpart/form 포맷, 선택하지 않을 시 ""
              example: 지문 이미지 URL
            additionalProblemImage:
              type: string
              format: uri
              description: mulitpart/form 포맷, 선택하지 않을 시 ""
              example: 추가 문제 이미지 URL       
               
      responses:
        '200':
          description: 문제 추가 성공
          content:
            application/json:
              schema:
                type: object
                properties:
                  issuccess:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: 문제 추가하기 성공             
        '400':
          description: 문제 추가하기 실패
          content:
            application/json:
              schema:
                type: object
                properties:
                  errorMessage:
                    type: string
                    example: Invalid request

  /problems/scale:
    patch:
      summary: 문제 미리보기 스케일 설정
      description: 특정 폴더 안 문제들을 조회할 수 있는 화면에서 확대 축소하여 가로 줄에서 디스플레이할 문제 수를 조절합니다.
      tags:
        - 홈
      parameters:
        - name: scale
          in: query
          required: true
          schema:
            type: number
            format: float
            description: 확대/축소 비율. 예를 들어, 1은 기본 크기, 2는 2배 확대, 0.5는 50% 축소를 의미합니다.
      responses:
        '200':
          description: 스케일 설정 성공
          content:
           application/json:
             schema:
               type: object
               properties:
                 scale:
                   type: number
                   format: float
                   description: 현재 설정된 확대/축소 비율
               example:
                 scale: 1.5              
        '400':
          description: 잘못된 요청
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "잘못된 요청 본문"
        '404':
          description: 찾을 수 없음
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "데이터를 찾을 수 없습니다."

  /problems/search:
    get:
      summary: 문제 검색하기 (구독)
      description: 전체 문제 또는 특정 폴더 안 문제를 검색합니다. `folderId` 파라미터가 제공되지 않으면 전체 문제를 검색하며, 제공되면 해당 폴더 내 문제만 검색합니다.
      tags:
        - 홈
      parameters:
        - name: query
          in: query
          required: true
          schema:
            type: string
            description: 검색할 텍스트. 문제 텍스트에서 이 텍스트를 포함하는 문제를 찾습니다.
        - name: folderId
          in: query
          schema:
            type: string
            description: (선택 사항) 검색할 폴더의 ID. 이 파라미터가 제공되면 해당 폴더 내에서만 검색이 수행됩니다.
      responses:
        '200':
          description: 문제 검색 성공
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    problemId:
                      type: string
                      description: 문제 ID
                    problemImage:
                        type: string
                        format: uri
                        description: 문제 이미지 URL
                    problemText:
                        type: string
                        description: 문제 텍스트
        '400':
          description: 잘못된 요청
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "잘못된 요청 본문"
        '403':
          description: 구독 계정이 아닐 경우 접근 거부
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "구독 계정만 이용 가능합니다."
        '404':
          description: 찾을 수 없음
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "데이터를 찾을 수 없습니다."             

  /problems/{problemId}:
    get:
      summary: 문제 조회하기
      description: 문제의 세부 정보를 조회합니다.
      tags:
        - 홈
      parameters:
        - name: problemId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 문제 조회 성공
          content:
            application/json:
              schema:
                type: object
                properties:
                  problemId:
                    type: string
                  problemImage:
                    type: string
                    format: uri
                    description: 문제 이미지 URL
                  answer:
                    type: string
                  solutionImage:
                    type: string
                    format: uri
                    description: 풀이 과정 이미지 URL
                  passageImage:
                    type: string
                    format: uri
                    description: 지문 이미지 URL
                  additionalProblemImage:
                    type: string
                    format: uri
                    description: 추가 문제 이미지 URL
                  problemText:
                    type: string
                    description: (구독) 문제 텍스트
                  problemType:
                    type: string
                    description: 문제 유형
                  statistics:
                    type: object
                    properties:
                      wrongCount:
                        type: integer
                        description: 틀린 횟수
                      solvedCount:
                        type: integer
                        description: 맞은 횟수
                required:
                  - problemImage
                  - answer
        '403':
         description: 구독 계정이 아닐 경우 접근 거부
         content:
           application/json:
             schema:
               type: object
               properties:
                 message:
                   type: string
                   example: "구독 계정만 이용 가능합니다."
        '404':
          description: 찾을 수 없음
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "데이터를 찾을 수 없습니다."

  /problems/{problemId}/edit:
    patch:
      summary: 문제 수정하기
      description: 문제의 세부 정보를 수정합니다.
      tags:
        - 홈
      parameters:
        - name: problemId
          in: path
          required: true
          schema:
            type: string
            description: 문제 ID
        - name: problemImage
          in: query
          schema:
            type: string
            format: binary
            description: 문제 이미지 파일
        - name: answer
          in: query
          schema:
            type: string
            description: 문제 정답
        - name: solutionImage
          in: query
          schema:
            type: string
            format: binary
            description: 풀이 과정 이미지 
        - name: passageImage
          in: query
          schema:
            type: string
            format: binary
            description: 지문 이미지 파일
        - name: additionalProblemImage
          in: query
          schema:
            type: array
            format: binary
            items:
              type: string
              format: binary
            description: 추가 문제 이미지 파일(여러장 가능)
        - name: problemText
          in: query
          schema:
            type: string
            description: 문제 텍스트 (구독)
        - name: problemType
          in: query
          schema:
            type: string
            description: 문제 유형
      responses:
        '200':
          description: 문제 수정 성공
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "문제 수정 성공"
        '400':
          description: 잘못된 요청
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "잘못된 요청 본문"
        '403':
         description: 구독 계정이 아닐 경우 접근 거부
         content:
           application/json:
             schema:
               type: object
               properties:
                 message:
                   type: string
                   example: "구독 계정만 이용 가능합니다."
        '404':
          description: 찾을 수 없음
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "데이터를 찾을 수 없습니다."

  /problems/{problemId}/ai-solution:
    post:
      summary: AI 문제 풀이 (구독)
      description: ChatGPT API를 활용하여 문제 풀이를 제공합니다.
      tags:
        - 홈
      parameters:
        - name: problemId
          in: path
          required: true
          schema:
            type: string
            description: 문제 ID
        - name: prompt
          in: query
          required: false
          schema:
            type: string
            description: 텍스트 프롬프트
        - name: image
          in: query
          required: false
          schema:
            type: string
            format: binary
            description: 문제 이미지를 업로드합니다. 카메라 촬영 또는 갤러리에서 선택된 이미지를 포함할 수 있습니다.
      responses:
        '200':
          description: AI 문제 풀이 성공
          content:
            application/json:
              schema:
                type: object
                properties:
                  response:
                    type: string
                    description: AI가 생성한 문제 풀이 텍스트
        '400':
          description: 잘못된 요청
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "잘못된 요청 본문"
        '403':
         description: 구독 계정이 아닐 경우 접근 거부
         content:
           application/json:
             schema:
               type: object
               properties:
                 message:
                   type: string
                   example: "구독 계정만 이용 가능합니다."
        '404':
          description: 찾을 수 없음
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "데이터를 찾을 수 없습니다."
        '500':
          description: 서버 오류 (예-ChatGPT API 호출 실패)
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "서버 오류가 발생했습니다. 잠시 후 다시 시도해 주세요."

# 학습하기 관련 API 
  /learn/folders/{folderId}:
    get:
      summary: 학습용 폴더 선택하기
      description: 학습하기 탭에서 문제를 풀 폴더를 선택합니다.
      tags:
        - 학습하기
      parameters:
        - name: folderId
          in: path
          required: true
          schema:
            type: string
            description: 폴더 ID
      responses:
        '200':
          description: 폴더 선택 성공
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "폴더 선택 완료"
                  folderId:
                    type: string
                    description: 선택된 폴더 ID
                    example: "1"
        '404':
          description: 찾을 수 없음
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "데이터를 찾을 수 없습니다."
        '400':
          description: 잘못된 요청
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "잘못된 요청 본문입니다."

  /learn/folders/{folderId}/problems/{problemIndex}:
    get:
      summary: 학습용 문제 조회하기
      description: 학습하기 탭에서 특정 폴더 내 문제를 조회합니다.
      tags:
        - 학습하기
      parameters:
        - name: folderId
          in: path
          required: true
          schema:
            type: string
            description: 폴더 ID
        - name: problemIndex
          in: path
          required: true
          schema:
            type: integer
            description: 문제 인덱스(0부터 시작)
      responses:
        '200':
          description: 문제 조회 성공
          content:
            application/json:
              schema:
                type: object
                properties:
                  problemId:
                    type: string
                  problemImage:
                    type: string
                    format: uri
                    description: 문제 이미지 URL
                  folderName:
                    type: string
                    description: 폴더의 이름
                required:
                  - problemImage
        '404':
          description: 찾을 수 없음
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "데이터를 찾을 수 없습니다."

  /learn/folders/{folderId}/problems/{problemId}/check-answer:
    post:
      summary: 정답 확인하기
      description: 사용자가 정답을 확인하고 맞췄는지 기록합니다.
      tags:
        - 학습하기
      parameters:
        - name: folderId
          in: path
          required: true
          schema:
            type: string
            description: 폴더 ID
        - name: problemId
          in: path
          required: true
          schema:
            type: string
            description: 문제 ID
        - name: swipeDirection
          in: query
          required: true
          schema:
            type: string
            enum:
              - right
              - left
            description: 스와이프 방향 ('right'는 정답, 'left'는 정답이 아님)
            
      responses:
        '200':
          description: 정답 확인 성공
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    description: 문제 풀이 상태 (예- '미완료', '맞은 문제', '틀린 문제')
                  correctAnswer:
                    type: string
                    description: 실제 정답
        '400':
          description: 잘못된 요청
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "잘못된 요청 본문입니다."
        '404':
          description: 찾을 수 없음
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "데이터를 찾을 수 없습니다."
        '500':
          description: 서버 오류
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "서버 오류 발생"

  /learn/folders/{folderId}/progress:
    get:
      summary: 풀이 진척도 확인하기
      description: 폴더 내 풀이 진척도를 확인합니다.
      tags:
        - 학습하기
      parameters:
        - name: folderId
          in: path
          required: true
          schema:
            type: string
            description: 폴더 ID
      responses:
        '200':
          description: 풀이 진척도 조회 성공
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    problemId:
                      type: string
                      description: 문제 ID
                    status:
                      type: string
                      enum: 
                        - 미완료
                        - 맞은 문제
                        - 틀린 문제
                      description: 문제 상태  
        '500':
          description: 서버 오류
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string

 # 통계 관련 API                      
  /stats/mistakes:
    get:
      summary: 많이 틀린 문제 순으로 조회
      description: 사용자가 틀린 문제를 틀린 횟수에 따라 나열합니다.
      tags:
        - 통계
      responses:
        '200':
          description: 많이 틀린 문제 조회 성공
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    problemId:
                      type: string
                      description: 문제 
                    problemImage:
                      type: string
                      format: uri
                      description: 문제 이미지 URL
                    mistakeCount:
                      type: integer
                      description: 틀린 횟수
        '400':
          description: 잘못된 요청
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "잘못된 요청 본문입니다."
        '404':
          description: 찾을 수 없음
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "데이터를 찾을 수 없습니다."
          
  /stats/subject-type:
    get:
      summary: 자주 틀린 과목 및 유형 조회
      description: 자주 틀린 과목과 문제 유형을 분석하여 표시합니다.
      tags:
        - 통계
      parameters:
        - name: subjectId
          in: query
          required: true
          schema:
            type: string
            description: 조회할 과목 ID
      responses:
        '200':
          description: 자주 틀린 과목 및 유형 조회 성공
          content:
            application/json:
              schema:
                type: object
                properties:
                  mainCategory:
                    type: string
                    description: 대분류
                    example: 수학
                  category:
                    type: string
                    description: 조회된 과목의 이름(중분류)
                    example: 미적분
                  subCategories:
                    type: array
                    items:
                      type: object
                      properties:
                        subCategory:
                          type: string
                          description: 문제 유형(소분류)
                          example: 도함수의 활용
                        mistakeCount:
                          type: integer
                          description: 해당 문제 유형에서의 틀린 횟수
                          example: 45
                required:
                  - category
                  - subCategories
        '400':
          description: 잘못된 요청
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "잘못된 요청 본문입니다."
        '404':
          description: 찾을 수 없음
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "데이터를 찾을 수 없습니다."
